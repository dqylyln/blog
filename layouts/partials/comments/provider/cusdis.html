{{- $host := default "https://cusdis.com" .Site.Params.comments.cusdis.host -}}
<div id="cusdis_thread"
     data-host="{{ $host }}"
     data-app-id="{{ .Site.Params.comments.cusdis.id }}"
     data-page-id="{{ .File.UniqueID }}"
     data-page-url="{{ .Permalink }}"
     data-page-title="{{ .Title }}"></div>
<script async defer src="{{ $host }}/js/cusdis.es.js"></script>

<script>
    function setCusdisTheme(theme) {
        let cusdis = document.querySelector('#cusdis_thread iframe');
        if (cusdis) {
            window.CUSDIS.setTheme(theme)
        }
    }

    window.addEventListener('onColorSchemeChange', (e) => {
        setCusdisTheme(e.detail)
    })
    window.CUSDIS_LOCALE = {
        "powered_by": "评论由 Cusdis 提供",
        "post_comment": "发送",
        "loading": "加载中",
        "email": "邮箱地址 (可选)",
        "nickname": "昵称",
        "reply_placeholder": "回复内容...",
        "reply_btn": "回复",
        "sending": "发送中...",
        "mod_badge": "管理员",
        "content_is_required": "内容不能为空",
        "nickname_is_required": "昵称不能为空",
        "comment_has_been_sent": "评论已发送，管理员审核通过后会展示"
    }
</script>